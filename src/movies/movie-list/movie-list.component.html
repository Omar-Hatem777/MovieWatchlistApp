<div class="container-fluid bg-dark text-light min-vh-100 py-5">
    <h2 class="mb-4">
        <i class="fa-solid fa-film me-2"></i> Movie List
    </h2>

    <!-- Category Filter Dropdown -->
    <div class="mb-4">
        <label for="categoryFilter" class="me-2">
            <i class="fa-solid fa-filter me-1"></i> Filter by Category:
        </label>
        <select id="categoryFilter" class="form-select w-auto d-inline-block" [(ngModel)]="selectedCategory">
            <option value="">All</option>
            <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
        </select>
    </div>

    <div class="row g-4">
        <div class="col-12 col-sm-6 col-md-4 col-lg-3" *ngFor="let movie of movies | categoryFilter:selectedCategory">
            <div class="card bg-secondary text-light h-100 shadow rounded-4 d-flex flex-column movie-card" [routerLink]="['/movies',movie.id]">
                <img [src]="movie.posterUrl" class="card-img-top rounded-top-4" [alt]="movie.title"
                    style="height: 250px; object-fit: cover;">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">
                        <i class="fa-solid fa-clapperboard me-2"></i>{{ movie.title }}
                    </h5>
                    <p class="small mb-1">
                        <i class="fa-solid fa-tags me-1"></i><strong>Category:</strong> {{ movie.category }}
                    </p>
                    <p class="small mb-1">
                        <i class="fa-solid fa-star me-1 text-warning"></i><strong>Rating:</strong> {{ movie.rating }}
                    </p>
                    <p class="card-text flex-grow-1">{{ movie.description | truncate }}</p>

                    <!-- Add to Watchlist Button -->
                    <button class="btn btn-outline-light mt-3" [disabled]="isInWatchlist(movie)"
                        (click)="addToWatchlist(movie)">
                        <i class="fa-solid fa-plus me-1">add</i>
                        {{ isInWatchlist(movie) ? 'Added' : 'Add to Watchlist' }}
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>